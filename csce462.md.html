<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link href="data:text/css;charset=utf-8,%0Ahtml%20%7B%0Afont%2Dsize%3A%20100%25%3B%0Aoverflow%2Dy%3A%20scroll%3B%0A%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0A%2Dms%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0A%7D%0Abody%20%7B%0Acolor%3A%20%23444%3B%0Afont%2Dfamily%3A%20Georgia%2C%20Palatino%2C%20%27Palatino%20Linotype%27%2C%20Times%2C%20%27Times%20New%20Roman%27%2C%20serif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E7%3B%0Apadding%3A%201em%3B%0Amargin%3A%20auto%3B%0Amax%2Dwidth%3A%2050em%3B%0Abackground%3A%20%23fefefe%3B%0A%7D%0Aa%2C%20p%2C%20dl%2C%20dt%2C%20ul%2C%20li%20%7B%0Afont%2Dsize%3A%2018px%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230645ad%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%230b0080%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%2306e%3B%0A%7D%0Aa%3Aactive%20%7B%0Acolor%3A%20%23faa700%3B%0A%7D%0Aa%3Afocus%20%7B%0Aoutline%3A%20thin%20dotted%3B%0A%7D%0Ap%20%7B%0Amargin%3A%201em%200%3B%0A%7D%0Aimg%20%7B%0Amax%2Dwidth%3A%20100%25%3B%0A%7D%0Ah1%2C%20h2%2C%20h3%2C%20h4%2C%20h5%2C%20h6%20%7B%0Acolor%3A%20%23111%3B%0Aline%2Dheight%3A%20125%25%3B%0Amargin%2Dtop%3A%202em%3B%0Amargin%2Dbottom%3A%200%2E125em%3B%0Afont%2Dweight%3A%20normal%3B%0A%7D%0Ah4%2C%20h5%2C%20h6%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%202em%3B%0A%7D%0Ah2%20%7B%0Afont%2Dsize%3A%201%2E5em%3B%0A%7D%0Ah3%20%7B%0Afont%2Dsize%3A%201%2E2em%3B%0A%7D%0Ah4%20%7B%0Afont%2Dsize%3A%201%2E1em%3B%0A%7D%0Ah5%20%7B%0Afont%2Dsize%3A%201em%3B%0A%7D%0Ah6%20%7B%0Afont%2Dsize%3A%200%2E9em%3B%0A%7D%0Ablockquote%20%7B%0Acolor%3A%20%23666666%3B%0Amargin%3A%200%3B%0Apadding%2Dleft%3A%203em%3B%0Aborder%2Dleft%3A%200%2E5em%20%23EEE%20solid%3B%0A%7D%0Ahr%20%7B%0Adisplay%3A%20block%3B%0Aheight%3A%202px%3B%0Aborder%3A%200%3B%0Aborder%2Dtop%3A%201px%20solid%20%23aaa%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23eee%3B%0Amargin%3A%201em%200%3B%0Apadding%3A%200%3B%0A%7D%0Apre%2C%20code%2C%20kbd%2C%20samp%20%7B%0Acolor%3A%20%23000%3B%0Afont%2Dfamily%3A%20monospace%2C%20monospace%3B%0A%5Ffont%2Dfamily%3A%20%27courier%20new%27%2C%20monospace%3B%0Afont%2Dsize%3A%200%2E98em%3B%0A%7D%0Apre%20%7B%0Awhite%2Dspace%3A%20pre%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%0Aword%2Dwrap%3A%20break%2Dword%3B%0A%7D%0Ab%2C%20strong%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Adfn%20%7B%0Afont%2Dstyle%3A%20italic%3B%0A%7D%0Ains%20%7B%0Abackground%3A%20%23ff9%3B%0Acolor%3A%20%23000%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Amark%20%7B%0Abackground%3A%20%23ff0%3B%0Acolor%3A%20%23000%3B%0Afont%2Dstyle%3A%20italic%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Asub%2C%20sup%20%7B%0Afont%2Dsize%3A%2075%25%3B%0Aline%2Dheight%3A%200%3B%0Aposition%3A%20relative%3B%0Avertical%2Dalign%3A%20baseline%3B%0A%7D%0Asup%20%7B%0Atop%3A%20%2D0%2E5em%3B%0A%7D%0Asub%20%7B%0Abottom%3A%20%2D0%2E25em%3B%0A%7D%0Aul%2C%20ol%20%7B%0Amargin%3A%200%3B%0Apadding%3A%200%200%200%201%2E25em%3B%0A%7D%0Ali%20p%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Aul%20ul%2C%20ol%20ol%20%7B%0Amargin%3A%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dbottom%3A%201em%3B%0A%7D%0Adt%20%7B%0Afont%2Dweight%3A%20bold%3B%0Amargin%2Dbottom%3A%20%2E8em%3B%0A%7D%0Add%20%7B%0Amargin%3A%200%200%20%2E8em%202em%3B%0A%7D%0Add%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Aimg%20%7B%0Aborder%3A%200%3B%0A%2Dms%2Dinterpolation%2Dmode%3A%20bicubic%3B%0Avertical%2Dalign%3A%20middle%3B%0A%7D%0Afigure%20%7B%0Adisplay%3A%20block%3B%0Atext%2Dalign%3A%20center%3B%0Amargin%3A%201em%200%3B%0A%7D%0Afigure%20img%20%7B%0Aborder%3A%20none%3B%0Amargin%3A%200%20auto%3B%0A%7D%0Afigcaption%20%7B%0Afont%2Dsize%3A%200%2E8em%3B%0Afont%2Dstyle%3A%20italic%3B%0Amargin%3A%200%200%20%2E8em%3B%0A%7D%0Atable%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0A%0Aborder%2Dbottom%3A%201px%20solid%20%23ddd%3B%0Aborder%2Dright%3A%201px%20solid%20%23ddd%3B%0Aborder%2Dspacing%3A%200%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Apadding%3A%20%2E2em%201em%3B%0Abackground%2Dcolor%3A%20%23eee%3B%0Aborder%2Dtop%3A%201px%20solid%20%23ddd%3B%0Aborder%2Dleft%3A%201px%20solid%20%23ddd%3B%0A%7D%0Atable%20td%20%7B%0Apadding%3A%20%2E2em%201em%3B%0Aborder%2Dtop%3A%201px%20solid%20%23ddd%3B%0Aborder%2Dleft%3A%201px%20solid%20%23ddd%3B%0Avertical%2Dalign%3A%20top%3B%0A%7D%0A%2Eauthor%20%7B%0Afont%2Dsize%3A%201%2E2em%3B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%40media%20only%20screen%20and%20%28min%2Dwidth%3A%20480px%29%20%7B%0Abody%20%7B%0Afont%2Dsize%3A%2014px%3B%0A%7D%0A%7D%0A%40media%20only%20screen%20and%20%28min%2Dwidth%3A%20768px%29%20%7B%0Abody%20%7B%0Afont%2Dsize%3A%2016px%3B%0A%7D%0A%7D%0A%40media%20print%20%7B%0A%2A%20%7B%0Abackground%3A%20transparent%20%21important%3B%0Acolor%3A%20black%20%21important%3B%0Afilter%3A%20none%20%21important%3B%0A%2Dms%2Dfilter%3A%20none%20%21important%3B%0A%7D%0Abody%20%7B%0Afont%2Dsize%3A%2012pt%3B%0Amax%2Dwidth%3A%20100%25%3B%0A%7D%0Aa%2C%20a%3Avisited%20%7B%0Atext%2Ddecoration%3A%20underline%3B%0A%7D%0Ahr%20%7B%0Aheight%3A%201px%3B%0Aborder%3A%200%3B%0Aborder%2Dbottom%3A%201px%20solid%20black%3B%0A%7D%0Aa%5Bhref%5D%3Aafter%20%7B%0Acontent%3A%20%22%20%28%22%20attr%28href%29%20%22%29%22%3B%0A%7D%0Aabbr%5Btitle%5D%3Aafter%20%7B%0Acontent%3A%20%22%20%28%22%20attr%28title%29%20%22%29%22%3B%0A%7D%0A%2Eir%20a%3Aafter%2C%20a%5Bhref%5E%3D%22javascript%3A%22%5D%3Aafter%2C%20a%5Bhref%5E%3D%22%23%22%5D%3Aafter%20%7B%0Acontent%3A%20%22%22%3B%0A%7D%0Apre%2C%20blockquote%20%7B%0Aborder%3A%201px%20solid%20%23999%3B%0Apadding%2Dright%3A%201em%3B%0Apage%2Dbreak%2Dinside%3A%20avoid%3B%0A%7D%0Atr%2C%20img%20%7B%0Apage%2Dbreak%2Dinside%3A%20avoid%3B%0A%7D%0Aimg%20%7B%0Amax%2Dwidth%3A%20100%25%20%21important%3B%0A%7D%0A%40page%20%3Aleft%20%7B%0Amargin%3A%2015mm%2020mm%2015mm%2010mm%3B%0A%7D%0A%40page%20%3Aright%20%7B%0Amargin%3A%2015mm%2010mm%2015mm%2020mm%3B%0A%7D%0Ap%2C%20h2%2C%20h3%20%7B%0Aorphans%3A%203%3B%0Awidows%3A%203%3B%0A%7D%0Ah2%2C%20h3%20%7B%0Apage%2Dbreak%2Dafter%3A%20avoid%3B%0A%7D%0A%7D%0A" rel="stylesheet" type="text/css" />
</head>
<body>
<h1 id="csce-462">CSCE 462</h1>
<h1 id="soc">SOC:</h1>
<ul>
<li>System On a Chip</li>
</ul>
<h1 id="latency-vs-throughput">Latency vs Throughput</h1>
<ul>
<li>latency: time to complete one operation</li>
<li>throughput: operations per second</li>
<li>memory has both latency and throughput</li>
</ul>
<h1 id="gpio">GPIO</h1>
<ul>
<li>General Purpose Input/Output</li>
<li>sometimes called &quot;Port A&quot;</li>
</ul>
<h1 id="raspberry-pi-3">Raspberry Pi 3</h1>
<ul>
<li>1.2GHz 4-core processor</li>
<li>1GB RAM</li>
<li>40 board pins, 26 are GPIO</li>
<li>WiFi, Ethernet</li>
</ul>
<h1 id="positive-vs-negative-logic">positive vs negative logic</h1>
<ul>
<li>positive logic
<ul>
<li>AKA pull down resistor</li>
<li>switch:
<ul>
<li>resistor from GPIO to ground</li>
<li>switch from Vcc to GPIO</li>
</ul></li>
<li>LED: resistor and LED in series between GPIO and ground</li>
</ul></li>
<li>negative logic
<ul>
<li>AKA pull up resistor</li>
<li>switch:
<ul>
<li>resistor between GPIO and Vcc</li>
<li>switch between GPIO and ground</li>
</ul></li>
<li>LED: resistor and LED in series between GPIO and Vcc</li>
</ul></li>
<li>in all cases, LED must be oriented correctly (pointing toward lower voltage)</li>
<li>GPIO should only be used for less than 8mA
<ul>
<li>if LED or something needs more than that, connect it to an inverter, then connect the LED using the other kind of logic (positive/negative)</li>
</ul></li>
<li>typically use about 10k Ohm resistor with switches</li>
</ul>
<h1 id="arm">ARM</h1>
<ul>
<li>link register: stores return address of function
<ul>
<li>means that leaf function calls are faster</li>
</ul></li>
<li>flag bits
<ul>
<li><code>c</code> carry (unsigned overflow)
<ul>
<li><code>c</code> set after unsigned addition =&gt; overflow</li>
<li><code>c</code> <strong>NOT</strong> set after unsigned subtraction =&gt; overflow</li>
</ul></li>
<li><code>v</code> overflow (signed overflow)
<ul>
<li><code>v</code> set after signed addition =&gt; overflow</li>
<li><code>v</code> set after signed subtraction =&gt; overflow</li>
</ul></li>
<li><code>z</code> zero</li>
<li><code>n</code> negative</li>
<li><code>p</code> parity
<ul>
<li>just xor of all bits together</li>
</ul></li>
<li>flags set after every instruction?</li>
</ul></li>
<li><a href="http://www.peter-cockerell.net/aalp/html/ch-2.html" class="uri">http://www.peter-cockerell.net/aalp/html/ch-2.html</a></li>
<li><a href="http://www.peter-cockerell.net/aalp/html/ch-3.html" class="uri">http://www.peter-cockerell.net/aalp/html/ch-3.html</a></li>
<li>instruction format: <code>add{cond}{s} &lt;dest&gt;, &lt;lhs&gt;, &lt;rhs&gt;</code>
<ul>
<li><code>s</code>, if present, means the instruction can change processor flags (e.g. over/underflow)</li>
</ul></li>
<li><code>ldr</code>: load word (to register)</li>
<li><code>str</code>: store word
<ul>
<li>load/store can have suffix to do non-32-bit sizes:
<ul>
<li><code>b</code>: byte</li>
<li><code>h</code>: half-word (16 bits)</li>
</ul></li>
<li><code>ldr Rd, =label</code> (pseudo-instruction): loads address of label into register</li>
</ul></li>
<li>16 registers: <code>R0</code>-<code>R15</code>, and <code>CPSR</code>
<ul>
<li><code>R0</code>-<code>R3</code>: arguments to function call, and return value</li>
<li><code>R12 IP</code>: Intra procedural call</li>
<li><code>R13 SP</code>: Stack Pointer</li>
<li><code>R14 LR</code>: Link Register
<ul>
<li>stores return address</li>
</ul></li>
<li><code>R15 PC</code>: Program Counter
<ul>
<li>you can read/write to this directly, it's not special (though not a good idea)</li>
</ul></li>
<li><code>CPSR</code>: Current Program State Register:
<ul>
<li>stores flags about the state of the program: negative, zero, carry, overflow, underflow, privileged mode, etc...</li>
<li>can be modified directly (want to do read-modify-write state backup first)</li>
</ul></li>
<li><code>R4-R11</code> and <code>R13 SP</code> are callee preserved: function should push during prologue and pop in epilogue of function</li>
<li>callee must preserve <code>R14 LR</code> if it wishes to call subroutines</li>
<li><code>R12 IP</code> is weird. Used for libraries as stack space?</li>
</ul></li>
<li><code>push</code>/<code>pop</code> for accessing stack
<ul>
<li><p>you can push/pop multiple things at once, but you need to reverse at the end:</p>
<pre><code>push {ip, lr, sp}
pop {sp, lr, ip}</code></pre></li>
</ul></li>
<li><code>bl</code>: branch and link (set link register). use to call subroutines</li>
<li><code>bx lr</code>: branch to link register, to return from subroutine</li>
<li>constants: <code>mov r1, =label</code>
<ul>
<li>can do <code>ldr r0, =0x523</code> (translates to <code>PC</code> relative load)</li>
</ul></li>
<li>literal: <code>mov r0, #5</code>, <code>mov r2, #0x1C</code></li>
<li>memory access: <code>ldr r0 [r0]</code>, <code>str r0 [r1, #offset]</code>
<ul>
<li>memory access is sometimes done relative to <code>PC</code></li>
</ul></li>
<li><code>bic {Rd,} Rn, &lt;op2&gt;</code>: bit-clear. Clears all bits in <code>Rd</code> that are set in <code>Rn</code>. Equivalent to <code>Rd = Rn &amp; (~op2)</code></li>
</ul>
<h1 id="powers-of-two">powers of two:</h1>
<ul>
<li><span class="math inline">2<sup>10</sup></span> is 1K</li>
<li><span class="math inline">2<sup>20</sup></span> is 1M</li>
<li><span class="math inline">2<sup>30</sup></span> is 1G</li>
</ul>
<h1 id="systick-timer">SysTick timer</h1>
<ul>
<li>24-bit timer that counts down at bus clock frequency</li>
<li>only counts down</li>
<li>control registers (memory mapped)
<ul>
<li><code>ctrl</code>: control
<ul>
<li>can have different sources (but is always internal on raspberry pi)</li>
<li>bit 16: COUNT bit
<ul>
<li>1 if current value has been 0 since the last time you read ctrl register</li>
<li>0 otherwise</li>
</ul></li>
<li>enable bit to start timer (bit 0)</li>
</ul></li>
<li><code>reload</code>: value to start at (after counting wraps)</li>
<li><code>current</code>: current value timer is counting at
<ul>
<li>whenever you write to this, no matter what you write, it resets the counter</li>
</ul></li>
</ul></li>
</ul>
<h1 id="finite-state-machine-fsm">Finite State Machine (FSM)</h1>
<ul>
<li>Mealy vs Moore
<ul>
<li>Moore
<ul>
<li>output on states</li>
<li>output based on current state only</li>
</ul></li>
<li>Mealy
<ul>
<li>output on state transitions (edges of graph)</li>
<li>output based on state and current input</li>
</ul></li>
</ul></li>
<li>can have wait time at each state</li>
<li>can be implemented like a linked list (or other ways)</li>
<li>implementation
<ul>
<li>linked list: pointers link to adjacent nodes</li>
<li>table: stores indexes of adjacent nodes</li>
</ul></li>
<li>if you implement with a data structure, you need a driver function to advance states and whatnot</li>
<li>data structure implementation seems way over complicated</li>
</ul>
<h1 id="software-abstraction">Software abstraction</h1>
<ul>
<li>Define a problem with a minimal set of basic, abstract principles / concepts</li>
<li>Separation of concerns via interface/policy mechanisms</li>
<li>Straightforward, mechanical path to implementation</li>
<li>advantages
<ul>
<li>faster to develop</li>
<li>easier to debug</li>
<li>easier to change</li>
</ul></li>
</ul>
<!-- stuff not on exam 1 -->
<!-- 
# interrupts
* generated externally or internally
    * external: IO device (e.g. keyboard)
    * internal, e.g. exception, syscall
* each interrupt source has two bits:
    * arm bit: allow that interrupt to be triggered
    * flag bit: hardware sets this flag to throw interrupt, software clears flag when it starts handling the interrupt 
* interrupts are prioritized
    * against each other and against current state of CPU
    * PRIMASK: interrupt priority mask register
* there is a global interrupt enable/disable flag
* acknowledge interrupt means clear flag bit and begin handling interrupt
* can set other bit to enable/disable interrupts by source
* interrupt program status register IPSR: stores info about current interrupt
* interrupt service routine ISR: called by CPU when interrupt happens
    * TODO is there a separate one per interrupt?
 -->
</body>
</html>
